import numpy as np
import seaborn as sns
import matplotlib.pyplot as plt
#########################################################################################
# on_trap_squared_error_sum_dict = {(5, 9): 57, (17, 8): 5, (16, 8): 5, (10, 11): 6, (16, 6): 5, (5, 6): 61, (10, 6): 6, (25, 12): 5, (14, 10): 5, (15, 8): 4, (18, 8): 5, (16, 14): 5, (14, 9): 5, (25, 8): 5, (5, 8): 57, (15, 12): 4, (10, 8): 6, (20, 12): 5, (17, 6): 5, (16, 10): 5, (5, 12): 57, (17, 11): 5, (10, 12): 6, (15, 11): 4, (20, 9): 5, (16, 9): 5, (14, 14): 5, (16, 12): 5, (17, 14): 5, (10, 9): 6, (14, 11): 5, (16, 11): 5, (25, 11): 5, (18, 9): 5, (5, 11): 57, (17, 10): 5, (15, 10): 4, (14, 6): 6, (20, 10): 5, (18, 6): 5, (25, 14): 5, (18, 12): 5, (15, 14): 4, (20, 14): 5, (18, 10): 5, (25, 10): 5, (20, 8): 5, (5, 10): 57, (17, 9): 5, (10, 10): 6, (18, 14): 5, (25, 6): 5, (20, 11): 5, (14, 8): 5, (5, 14): 57, (14, 12): 5, (15, 6): 4, (10, 14): 3, (20, 6): 5, (17, 12): 5, (15, 9): 4, (18, 11): 5, (25, 9): 5}

on_trap_squared_error_sum_dict =  {(16, 6): 5, (7, 12): 5, (12, 12): 5, (10, 8): 6, (7, 6): 9, (14, 18): 5, (12, 6): 9, (19, 14): 5, (10, 18): 2, (9, 14): 5, (15, 18): 4, (9, 16): 3, (12, 10): 8, (15, 14): 4, (13, 10): 4, (20, 14): 5, (18, 10): 5, (17, 18): 5, (8, 12): 5, (19, 16): 5, (10, 14): 3, (8, 18): 5, (7, 8): 7, (6, 16): 54, (20, 16): 5, (11, 16): 4, (17, 8): 5, (16, 16): 5, (6, 14): 66, (11, 10): 8, (17, 6): 5, (16, 10): 5, (13, 16): 4, (18, 16): 5, (8, 6): 6, (11, 18): 4, (7, 18): 5, (14, 6): 6, (13, 6): 6, (20, 10): 5, (18, 6): 5, (15, 10): 4, (12, 18): 4, (15, 16): 4, (10, 6): 6, (14, 8): 5, (14, 12): 5, (19, 12): 5, (17, 12): 5, (12, 8): 9, (19, 8): 5, (6, 10): 74, (9, 8): 5, (11, 14): 4, (9, 18): 3, (16, 14): 5, (15, 12): 4, (13, 12): 4, (20, 12): 5, (18, 12): 5, (8, 10): 5, (8, 16): 5, (7, 14): 5, (6, 18): 53, (12, 14): 4, (19, 6): 5, (17, 10): 5, (9, 6): 5, (14, 16): 5, (11, 8): 8, (10, 16): 2, (16, 8): 5, (10, 10): 6, (15, 6): 4, (13, 18): 4, (20, 6): 5, (18, 18): 5, (15, 8): 4, (9, 12): 5, (6, 6): 107, (12, 16): 4, (14, 10): 5, (7, 16): 5, (13, 8): 6, (20, 8): 5, (18, 8): 5, (17, 16): 5, (8, 14): 5, (10, 12): 6, (7, 10): 7, (14, 14): 5, (20, 18): 5, (19, 10): 5, (17, 14): 5, (16, 18): 5, (19, 18): 5, (9, 10): 5, (6, 8): 77, (6, 12): 71, (11, 12): 8, (16, 12): 5, (13, 14): 4, (18, 14): 5, (8, 8): 6, (11, 6): 8}

on_trap_squared_error_sum_dict ={(7, 8): 66, (15, 20): 35, (12, 12): 20, (17, 20): 46, (15, 14): 35, (10, 8): 24, (14, 18): 35, (11, 22): 20, (10, 18): 18, (16, 22): 34, (13, 20): 28, (9, 14): 19, (7, 10): 65, (14, 14): 35, (9, 16): 17, (7, 22): 44, (13, 10): 31, (12, 22): 20, (6, 8): 129, (17, 18): 46, (8, 12): 33, (10, 14): 18, (8, 18): 32, (15, 16): 35, (6, 16): 81, (12, 8): 23, (11, 16): 20, (17, 8): 49, (16, 16): 34, (14, 22): 35, (11, 10): 28, (16, 10): 37, (13, 16): 28, (15, 12): 35, (9, 20): 17, (7, 18): 51, (12, 18): 20, (17, 22): 46, (15, 10): 38, (10, 10): 24, (8, 22): 27, (6, 14): 90, (14, 8): 37, (6, 20): 79, (11, 20): 20, (10, 20): 18, (17, 12): 46, (16, 20): 34, (13, 22): 28, (6, 10): 125, (9, 8): 26, (11, 14): 20, (14, 20): 35, (9, 18): 17, (16, 14): 34, (7, 20): 51, (13, 12): 28, (12, 20): 20, (8, 10): 34, (8, 16): 32, (7, 14): 62, (6, 18): 84, (12, 14): 20, (17, 10): 49, (14, 16): 35, (11, 8): 28, (10, 16): 18, (16, 8): 37, (13, 18): 28, (7, 16): 64, (9, 12): 24, (9, 22): 17, (15, 22): 35, (14, 10): 38, (15, 8): 37, (13, 8): 31, (12, 16): 20, (17, 16): 46, (8, 14): 31, (14, 12): 35, (10, 12): 18, (8, 20): 32, (15, 18): 35, (6, 22): 74, (12, 10): 23, (11, 18): 20, (10, 22): 18, (17, 14): 46, (16, 18): 34, (9, 10): 25, (7, 12): 65, (6, 12): 101, (11, 12): 20, (16, 12): 34, (13, 14): 28, (8, 8): 34}

# mahalanobis_list = [5,10,14,15,16,17,18,20,25]
# minimum_contour_list = [6,8,9,10,11,12,14]

mahalanobis_list = np.array([6,7,8,9,10,11,12,13,14,15,16,17])
minimum_contour_list = np.array([8,10,12,14,16,18,20,22])

trap_error_sum_array = np.zeros([len(mahalanobis_list), len(minimum_contour_list)])
for tuple_key in on_trap_squared_error_sum_dict:
    print tuple_key[0]
    print tuple_key[1]
    mahal_idx = np.where(mahalanobis_list == (tuple_key[0]))[0][0]
    min_idx = np.where(minimum_contour_list == (tuple_key[1]))[0][0]

    trap_error_sum_array[mahal_idx][min_idx] = np.sqrt(on_trap_squared_error_sum_dict[tuple_key])
print trap_error_sum_array


fig = plt.figure(figsize=(8,8), facecolor="white")
ax = fig.add_subplot(111)

ax = sns.heatmap(trap_error_sum_array, linewidth =0.5, cmap = 'viridis', yticklabels = [str(x)for x in mahalanobis_list], xticklabels = [str(x)for x in minimum_contour_list], vmax = np.percentile(trap_error_sum_array,85))
trap_name = 'trap_H'
plt.xlabel('minimum contour')
plt.ylabel('mahalanobis')
plt.title('trap H')
ax.collections[0].colorbar.set_label("on-trap count RMSE")


namestr = './2017_10_26/'+trap_name+'_on_trap_rmse2.png'
plt.savefig(namestr, bbox_inches='tight')
plt.show()

###########################################################################################
