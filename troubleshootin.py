import numpy as np
import seaborn as sns
import matplotlib.pyplot as plt
#########################################################################################
# on_trap_squared_error_sum_dict = {(5, 9): 57, (17, 8): 5, (16, 8): 5, (10, 11): 6, (16, 6): 5, (5, 6): 61, (10, 6): 6, (25, 12): 5, (14, 10): 5, (15, 8): 4, (18, 8): 5, (16, 14): 5, (14, 9): 5, (25, 8): 5, (5, 8): 57, (15, 12): 4, (10, 8): 6, (20, 12): 5, (17, 6): 5, (16, 10): 5, (5, 12): 57, (17, 11): 5, (10, 12): 6, (15, 11): 4, (20, 9): 5, (16, 9): 5, (14, 14): 5, (16, 12): 5, (17, 14): 5, (10, 9): 6, (14, 11): 5, (16, 11): 5, (25, 11): 5, (18, 9): 5, (5, 11): 57, (17, 10): 5, (15, 10): 4, (14, 6): 6, (20, 10): 5, (18, 6): 5, (25, 14): 5, (18, 12): 5, (15, 14): 4, (20, 14): 5, (18, 10): 5, (25, 10): 5, (20, 8): 5, (5, 10): 57, (17, 9): 5, (10, 10): 6, (18, 14): 5, (25, 6): 5, (20, 11): 5, (14, 8): 5, (5, 14): 57, (14, 12): 5, (15, 6): 4, (10, 14): 3, (20, 6): 5, (17, 12): 5, (15, 9): 4, (18, 11): 5, (25, 9): 5}

on_trap_squared_error_sum_dict =  {(16, 6): 5, (7, 12): 5, (12, 12): 5, (10, 8): 6, (7, 6): 9, (14, 18): 5, (12, 6): 9, (19, 14): 5, (10, 18): 2, (9, 14): 5, (15, 18): 4, (9, 16): 3, (12, 10): 8, (15, 14): 4, (13, 10): 4, (20, 14): 5, (18, 10): 5, (17, 18): 5, (8, 12): 5, (19, 16): 5, (10, 14): 3, (8, 18): 5, (7, 8): 7, (6, 16): 54, (20, 16): 5, (11, 16): 4, (17, 8): 5, (16, 16): 5, (6, 14): 66, (11, 10): 8, (17, 6): 5, (16, 10): 5, (13, 16): 4, (18, 16): 5, (8, 6): 6, (11, 18): 4, (7, 18): 5, (14, 6): 6, (13, 6): 6, (20, 10): 5, (18, 6): 5, (15, 10): 4, (12, 18): 4, (15, 16): 4, (10, 6): 6, (14, 8): 5, (14, 12): 5, (19, 12): 5, (17, 12): 5, (12, 8): 9, (19, 8): 5, (6, 10): 74, (9, 8): 5, (11, 14): 4, (9, 18): 3, (16, 14): 5, (15, 12): 4, (13, 12): 4, (20, 12): 5, (18, 12): 5, (8, 10): 5, (8, 16): 5, (7, 14): 5, (6, 18): 53, (12, 14): 4, (19, 6): 5, (17, 10): 5, (9, 6): 5, (14, 16): 5, (11, 8): 8, (10, 16): 2, (16, 8): 5, (10, 10): 6, (15, 6): 4, (13, 18): 4, (20, 6): 5, (18, 18): 5, (15, 8): 4, (9, 12): 5, (6, 6): 107, (12, 16): 4, (14, 10): 5, (7, 16): 5, (13, 8): 6, (20, 8): 5, (18, 8): 5, (17, 16): 5, (8, 14): 5, (10, 12): 6, (7, 10): 7, (14, 14): 5, (20, 18): 5, (19, 10): 5, (17, 14): 5, (16, 18): 5, (19, 18): 5, (9, 10): 5, (6, 8): 77, (6, 12): 71, (11, 12): 8, (16, 12): 5, (13, 14): 4, (18, 14): 5, (8, 8): 6, (11, 6): 8}

on_trap_squared_error_sum_dict ={(7, 8): 0, (15, 20): 0, (12, 12): 0, (17, 20): 0, (15, 14): 0, (10, 8): 0, (14, 18): 0, (11, 22): 0, (10, 18): 0, (16, 22): 0, (13, 20): 0, (9, 14): 0, (7, 10): 0, (14, 14): 0, (9, 16): 0, (7, 22): 0, (13, 10): 0, (12, 22): 0, (6, 8): 2, (17, 18): 0, (8, 12): 0, (10, 14): 0, (8, 18): 0, (15, 16): 0, (6, 16): 1, (12, 8): 0, (11, 16): 0, (17, 8): 0, (16, 16): 0, (14, 22): 0, (11, 10): 0, (16, 10): 0, (13, 16): 0, (15, 12): 0, (9, 20): 0, (7, 18): 0, (12, 18): 0, (17, 22): 0, (15, 10): 0, (10, 10): 0, (8, 22): 0, (6, 14): 1, (14, 8): 0, (6, 20): 0, (11, 20): 0, (10, 20): 0, (17, 12): 0, (16, 20): 0, (13, 22): 0, (6, 10): 1, (9, 8): 0, (11, 14): 0, (14, 20): 0, (9, 18): 0, (16, 14): 0, (7, 20): 0, (13, 12): 0, (12, 20): 0, (8, 10): 0, (8, 16): 0, (7, 14): 0, (6, 18): 0, (12, 14): 0, (17, 10): 0, (14, 16): 0, (11, 8): 0, (10, 16): 0, (16, 8): 0, (13, 18): 0, (7, 16): 0, (9, 12): 0, (9, 22): 0, (15, 22): 0, (14, 10): 0, (15, 8): 0, (13, 8): 0, (12, 16): 0, (17, 16): 0, (8, 14): 0, (14, 12): 0, (10, 12): 0, (8, 20): 0, (15, 18): 0, (6, 22): 0, (12, 10): 0, (11, 18): 0, (10, 22): 0, (17, 14): 0, (16, 18): 0, (9, 10): 0, (7, 12): 0, (6, 12): 1, (11, 12): 0, (16, 12): 0, (13, 14): 0, (8, 8): 0}

# mahalanobis_list = [5,10,14,15,16,17,18,20,25]
# minimum_contour_list = [6,8,9,10,11,12,14]

mahalanobis_list = np.array([6,7,8,9,10,11,12,13,14,15,16,17])
minimum_contour_list = np.array([8,10,12,14,16,18,20,22])

trap_error_sum_array = np.zeros([len(mahalanobis_list), len(minimum_contour_list)])
for tuple_key in on_trap_squared_error_sum_dict:
    print tuple_key[0]
    print tuple_key[1]
    mahal_idx = np.where(mahalanobis_list == (tuple_key[0]))[0][0]
    min_idx = np.where(minimum_contour_list == (tuple_key[1]))[0][0]

    trap_error_sum_array[mahal_idx][min_idx] = np.sqrt(on_trap_squared_error_sum_dict[tuple_key])
print trap_error_sum_array
print np.percentile(trap_error_sum_array,70)

fig = plt.figure(figsize=(8,8), facecolor="white")
ax = fig.add_subplot(111)
# plt.imshow(trap_error_sum_array, cmap='hot', interpolation='nearest')
# plt.show()
ax = sns.heatmap(trap_error_sum_array, linewidth =0.5, cmap = 'viridis', yticklabels = [str(x)for x in mahalanobis_list], xticklabels = [str(x)for x in minimum_contour_list], vmax = np.percentile(trap_error_sum_array,85))
trap_name = 'trap_A'
plt.xlabel('minimum contour')
plt.ylabel('mahalanobis')
plt.title('trap A')
ax.collections[0].colorbar.set_label("on-trap count RMSE")


namestr = './2017_10_26/'+trap_name+'_on_trap_rmse.png'
plt.savefig(namestr, bbox_inches='tight')
plt.show()

###########################################################################################
